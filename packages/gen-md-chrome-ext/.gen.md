---
name: gen-md-chrome-ext-package
description: Configuration for generating @gen-md/chrome-ext - Chrome browser extension
context:
  - "./package.json"
  - "./manifest.json"
  - "./src/content.ts"
  - "./src/background.ts"
  - "./src/popup.ts"
  - "./src/parser.ts"
  - "./src/github.ts"
  - "./src/types.ts"
output: README.md
---
<input>
Generate a README.md for the gen-md Chrome browser extension.

## Extension Info
- Name: @gen-md/chrome-ext
- Version: 0.1.0
- Manifest Version: 3
- Scope: GitHub.com file viewing and repository browsing

## Package Type: Chrome Extension (Manifest V3)

This is a Chrome extension for viewing .gen.md files on GitHub.

### Structure Requirements
```
gen-md-chrome-ext/
├── src/
│   ├── background.ts      # Service worker
│   ├── content.ts         # Content script (injected into pages)
│   ├── popup.ts           # Popup UI script
│   ├── parser.ts          # Browser-compatible .gen.md parser
│   ├── github.ts          # GitHub API integration
│   └── types.ts           # TypeScript types
├── popup.html             # Popup UI
├── content.css            # Injected styles
├── icons/                 # Extension icons (16, 48, 128px)
├── manifest.json          # Chrome extension manifest
├── package.json
├── tsconfig.json
└── README.md
```

### Manifest V3 Requirements
- manifest_version: 3
- permissions: storage, activeTab
- host_permissions: https://github.com/*, https://raw.githubusercontent.com/*
- background.service_worker: dist/background.js
- content_scripts: match github.com/*

### Code Conventions
- NO external dependencies (browser-only)
- Implement custom YAML parser (no js-yaml)
- Use chrome.runtime for messaging
- Use chrome.storage for persistence
- TypeScript with .js import extensions

### GitHub Integration
- Detect .gen.md files in file browser
- Inject info panel when viewing .gen.md
- Add badges to .gen.md file links
- Fetch raw content from raw.githubusercontent.com

## Features

### 1. Content Script (content.ts)
Injects into GitHub pages (https://github.com/*)

**Info Panel** - When viewing a .gen.md file:
- Floating panel with frontmatter info
- Displays: name, description, output field
- Shows skills tags and context file tags
- Input block preview (first 500 chars)
- Copy to clipboard button
- Close button

**File Badges** - In repository file listings:
- Adds "gen-md" badge to .gen.md file links
- Visual identification in file trees

### 2. Background Service Worker (background.ts)
- Handles extension installation
- Updates action badge on .gen.md file detection
  - Badge: "✓" in green when viewing .gen.md file
  - Clears badge for other files
- Message handlers: GET_GEN_MD_INFO, COPY_TO_CLIPBOARD

### 3. Popup (popup.ts)
- Page status display (GitHub check)
- .gen.md file detection indicator
- Count of .gen.md files on current page
- Refresh button (reloads tab)
- Docs button (opens repo docs)

### 4. Parser (parser.ts)
Browser-compatible YAML-like frontmatter parser:
- `parseFrontmatter()` - Parse YAML frontmatter
- `parseGenMd()` - Full .gen.md parsing with validation
- `extractInputBlock()` - Extract <input> block content
- Handles: key-value pairs, arrays (dash-separated and inline)

### 5. GitHub Integration (github.ts)
- `getGitHubContext()` - Extract owner/repo/branch/path from URL
- `fetchRawContent()` - Fetch from raw.githubusercontent.com
- `isGenMdFile()` - Check if viewing .gen.md
- `findGenMdFilesInPage()` - Find .gen.md links on page

## Permissions
- `storage` - Local storage for settings
- `activeTab` - Active tab access
- Host permissions: `https://github.com/*`, `https://raw.githubusercontent.com/*`

## Include in README

1. Extension name and Chrome Web Store link (placeholder)
2. Features with screenshots placeholders
3. Installation: Chrome Web Store + manual (developer mode)
4. Permissions explanation
5. How it works on GitHub
6. Link to monorepo README
</input>
